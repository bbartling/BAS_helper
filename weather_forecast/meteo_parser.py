#!/usr/bin/env python
from BAC0.core.utils.notes import note_and_log
import requests, json, time
from datetime import datetime
import numpy as np

@note_and_log
class OpenWeatherOne:

    blank = {
        'lat': 46.78,
        'lon': -92.11,
        'timezone': 'America/Chicago',
        'timezone_offset': -18000,
        'current': {'dt': 1596803982,
        'sunrise': 1596797802,
        'sunset': 1596850298,
        'temp': 291.26,
        'feels_like': 290.37,
        'pressure': 1017,
        'humidity': 772,
        'dew_point': 286.14,
        'uvi': 8.15,
        'clouds': 75,
        'visibility': 10000,
        'wind_speed': 2.59,
        'wind_deg': 164,
        'weather': [{'id': 803,
        'main': 'Clouds',
        'description': 'broken clouds',
        'icon': '04d'}]},
        'hourly': [{'dt': 1596801600,
        'temp': 291.26,
        'feels_like': 290.37,
        'pressure': 1017,
        'humidity': 72,
        'dew_point': 286.14,
        'clouds': 75,
        'visibility': 10000,
        'wind_speed': 2.59,
        'wind_deg': 164,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596805200,
        'temp': 291.49,
        'feels_like': 290.73,
        'pressure': 1017,
        'humidity': 81,
        'dew_point': 288.17,
        'clouds': 76,
        'visibility': 10000,
        'wind_speed': 3.41,
        'wind_deg': 174,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0.02},
        {'dt': 1596808800,
        'temp': 292.38,
        'feels_like': 292.17,
        'pressure': 1015,
        'humidity': 83,
        'dew_point': 289.42,
        'clouds': 81,
        'visibility': 10000,
        'wind_speed': 3.29,
        'wind_deg': 183,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596812400,
        'temp': 293.28,
        'feels_like': 293.07,
        'pressure': 1015,
        'humidity': 83,
        'dew_point': 290.3,
        'clouds': 86,
        'visibility': 10000,
        'wind_speed': 3.79,
        'wind_deg': 183,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596816000,
        'temp': 294.14,
        'feels_like': 293.82,
        'pressure': 1015,
        'humidity': 80,
        'dew_point': 290.56,
        'clouds': 90,
        'visibility': 10000,
        'wind_speed': 4.09,
        'wind_deg': 185,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596819600,
        'temp': 295.22,
        'feels_like': 295.09,
        'pressure': 1015,
        'humidity': 77,
        'dew_point': 291.12,
        'clouds': 92,
        'visibility': 10000,
        'wind_speed': 4.08,
        'wind_deg': 185,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596823200,
        'temp': 296.29,
        'feels_like': 296.28,
        'pressure': 1015,
        'humidity': 74,
        'dew_point': 291.42,
        'clouds': 94,
        'visibility': 10000,
        'wind_speed': 4.15,
        'wind_deg': 184,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596826800,
        'temp': 297.48,
        'feels_like': 296.95,
        'pressure': 1014,
        'humidity': 70,
        'dew_point': 291.74,
        'clouds': 93,
        'visibility': 10000,
        'wind_speed': 5.05,
        'wind_deg': 194,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596830400,
        'temp': 297.24,
        'feels_like': 296.86,
        'pressure': 1013,
        'humidity': 72,
        'dew_point': 291.98,
        'clouds': 96,
        'visibility': 10000,
        'wind_speed': 4.98,
        'wind_deg': 189,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596834000,
        'temp': 296.93,
        'feels_like': 296.86,
        'pressure': 1013,
        'humidity': 74,
        'dew_point': 292.21,
        'clouds': 98,
        'visibility': 10000,
        'wind_speed': 4.63,
        'wind_deg': 189,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.02},
        {'dt': 1596837600,
        'temp': 296.64,
        'feels_like': 297.31,
        'pressure': 1012,
        'humidity': 77,
        'dew_point': 292.46,
        'clouds': 98,
        'visibility': 10000,
        'wind_speed': 3.81,
        'wind_deg': 178,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.02},
        {'dt': 1596841200,
        'temp': 296.99,
        'feels_like': 298.02,
        'pressure': 1012,
        'humidity': 78,
        'dew_point': 292.93,
        'clouds': 99,
        'visibility': 10000,
        'wind_speed': 3.65,
        'wind_deg': 172,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.01},
        {'dt': 1596844800,
        'temp': 296.81,
        'feels_like': 297.46,
        'pressure': 1012,
        'humidity': 78,
        'dew_point': 292.86,
        'clouds': 99,
        'visibility': 10000,
        'wind_speed': 4.08,
        'wind_deg': 163,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.01},
        {'dt': 1596848400,
        'temp': 296.51,
        'feels_like': 297.2,
        'pressure': 1012,
        'humidity': 80,
        'dew_point': 293,
        'clouds': 91,
        'visibility': 10000,
        'wind_speed': 4.1,
        'wind_deg': 167,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596852000,
        'temp': 296.01,
        'feels_like': 296.66,
        'pressure': 1011,
        'humidity': 83,
        'dew_point': 293.03,
        'clouds': 90,
        'visibility': 10000,
        'wind_speed': 4.23,
        'wind_deg': 170,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0},
        {'dt': 1596855600,
        'temp': 296.18,
        'feels_like': 296.54,
        'pressure': 1011,
        'humidity': 82,
        'dew_point': 293.06,
        'clouds': 94,
        'visibility': 10000,
        'wind_speed': 4.62,
        'wind_deg': 178,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0.02},
        {'dt': 1596859200,
        'temp': 296.23,
        'feels_like': 295.68,
        'pressure': 1010,
        'humidity': 81,
        'dew_point': 292.98,
        'clouds': 95,
        'visibility': 10000,
        'wind_speed': 5.82,
        'wind_deg': 184,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0.07},
        {'dt': 1596862800,
        'temp': 296.22,
        'feels_like': 295.41,
        'pressure': 1009,
        'humidity': 83,
        'dew_point': 293.2,
        'clouds': 96,
        'visibility': 10000,
        'wind_speed': 6.45,
        'wind_deg': 194,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10n'}],
        'pop': 0.66,
        'rain': {'1h': 0.37}},
        {'dt': 1596866400,
        'temp': 295.6,
        'feels_like': 294.78,
        'pressure': 1009,
        'humidity': 89,
        'dew_point': 293.85,
        'clouds': 97,
        'visibility': 10000,
        'wind_speed': 6.83,
        'wind_deg': 199,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10n'}],
        'pop': 0.93,
        'rain': {'1h': 0.55}},
        {'dt': 1596870000,
        'temp': 295.71,
        'feels_like': 294.98,
        'pressure': 1009,
        'humidity': 89,
        'dew_point': 293.96,
        'clouds': 100,
        'visibility': 10000,
        'wind_speed': 6.77,
        'wind_deg': 206,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10n'}],
        'pop': 0.67,
        'rain': {'1h': 0.1}},
        {'dt': 1596873600,
        'temp': 295.78,
        'feels_like': 295.52,
        'pressure': 1009,
        'humidity': 90,
        'dew_point': 294.08,
        'clouds': 96,
        'visibility': 10000,
        'wind_speed': 6.28,
        'wind_deg': 219,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0.61},
        {'dt': 1596877200,
        'temp': 296.01,
        'feels_like': 295.76,
        'pressure': 1009,
        'humidity': 89,
        'dew_point': 294.22,
        'clouds': 97,
        'visibility': 10000,
        'wind_speed': 6.3,
        'wind_deg': 221,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0.57},
        {'dt': 1596880800,
        'temp': 296.11,
        'feels_like': 296.2,
        'pressure': 1009,
        'humidity': 89,
        'dew_point': 294.22,
        'clouds': 98,
        'visibility': 10000,
        'wind_speed': 5.89,
        'wind_deg': 227,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04n'}],
        'pop': 0.54},
        {'dt': 1596884400,
        'temp': 295.96,
        'feels_like': 296.36,
        'pressure': 1010,
        'humidity': 89,
        'dew_point': 294.13,
        'clouds': 97,
        'visibility': 10000,
        'wind_speed': 5.33,
        'wind_deg': 231,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.54},
        {'dt': 1596888000,
        'temp': 295.79,
        'feels_like': 296.56,
        'pressure': 1011,
        'humidity': 90,
        'dew_point': 294.23,
        'clouds': 98,
        'visibility': 10000,
        'wind_speed': 4.81,
        'wind_deg': 229,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10d'}],
        'pop': 0.48,
        'rain': {'1h': 0.12}},
        {'dt': 1596891600,
        'temp': 296.21,
        'feels_like': 297.17,
        'pressure': 1011,
        'humidity': 90,
        'dew_point': 294.53,
        'clouds': 83,
        'visibility': 10000,
        'wind_speed': 4.84,
        'wind_deg': 232,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0.16},
        {'dt': 1596895200,
        'temp': 297.08,
        'feels_like': 298.06,
        'pressure': 1012,
        'humidity': 87,
        'dew_point': 294.88,
        'clouds': 85,
        'visibility': 10000,
        'wind_speed': 5.04,
        'wind_deg': 234,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.01},
        {'dt': 1596898800,
        'temp': 297.7,
        'feels_like': 298.95,
        'pressure': 1011,
        'humidity': 84,
        'dew_point': 294.99,
        'clouds': 90,
        'visibility': 10000,
        'wind_speed': 4.68,
        'wind_deg': 236,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.01},
        {'dt': 1596902400,
        'temp': 298.36,
        'feels_like': 300.15,
        'pressure': 1011,
        'humidity': 82,
        'dew_point': 295.25,
        'clouds': 92,
        'visibility': 10000,
        'wind_speed': 4.09,
        'wind_deg': 239,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.09},
        {'dt': 1596906000,
        'temp': 300.37,
        'feels_like': 302.03,
        'pressure': 1012,
        'humidity': 73,
        'dew_point': 295.18,
        'clouds': 89,
        'visibility': 10000,
        'wind_speed': 4.31,
        'wind_deg': 235,
        'weather': [{'id': 804,
         'main': 'Clouds',
         'description': 'overcast clouds',
         'icon': '04d'}],
        'pop': 0.05},
        {'dt': 1596909600,
        'temp': 301.8,
        'feels_like': 303.24,
        'pressure': 1012,
        'humidity': 67,
        'dew_point': 295.12,
        'clouds': 82,
        'visibility': 10000,
        'wind_speed': 4.58,
        'wind_deg': 235,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0},
        {'dt': 1596913200,
        'temp': 302.24,
        'feels_like': 303.44,
        'pressure': 1012,
        'humidity': 65,
        'dew_point': 295.24,
        'clouds': 69,
        'visibility': 10000,
        'wind_speed': 4.87,
        'wind_deg': 240,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0.18},
        {'dt': 1596916800,
        'temp': 302.54,
        'feels_like': 303.8,
        'pressure': 1012,
        'humidity': 65,
        'dew_point': 295.29,
        'clouds': 67,
        'visibility': 10000,
        'wind_speed': 5,
        'wind_deg': 245,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0.18},
        {'dt': 1596920400,
        'temp': 302.61,
        'feels_like': 304.27,
        'pressure': 1011,
        'humidity': 64,
        'dew_point': 295.25,
        'clouds': 56,
        'visibility': 10000,
        'wind_speed': 4.28,
        'wind_deg': 239,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04d'}],
        'pop': 0.16},
        {'dt': 1596924000,
        'temp': 302.6,
        'feels_like': 304.55,
        'pressure': 1011,
        'humidity': 64,
        'dew_point': 295.26,
        'clouds': 47,
        'visibility': 10000,
        'wind_speed': 3.86,
        'wind_deg': 231,
        'weather': [{'id': 802,
         'main': 'Clouds',
         'description': 'scattered clouds',
         'icon': '03d'}],
        'pop': 0.13},
        {'dt': 1596927600,
        'temp': 302.11,
        'feels_like': 304.51,
        'pressure': 1011,
        'humidity': 68,
        'dew_point': 295.64,
        'clouds': 41,
        'visibility': 10000,
        'wind_speed': 3.63,
        'wind_deg': 224,
        'weather': [{'id': 802,
         'main': 'Clouds',
         'description': 'scattered clouds',
         'icon': '03d'}],
        'pop': 0.07},
        {'dt': 1596931200,
        'temp': 300.97,
        'feels_like': 303.08,
        'pressure': 1011,
        'humidity': 73,
        'dew_point': 295.87,
        'clouds': 34,
        'visibility': 10000,
        'wind_speed': 4.1,
        'wind_deg': 225,
        'weather': [{'id': 802,
         'main': 'Clouds',
         'description': 'scattered clouds',
         'icon': '03d'}],
        'pop': 0.11},
        {'dt': 1596934800,
        'temp': 299.24,
        'feels_like': 301.7,
        'pressure': 1012,
        'humidity': 81,
        'dew_point': 295.73,
        'clouds': 21,
        'visibility': 10000,
        'wind_speed': 3.63,
        'wind_deg': 230,
        'weather': [{'id': 801,
         'main': 'Clouds',
         'description': 'few clouds',
         'icon': '02d'}],
        'pop': 0.04},
        {'dt': 1596938400,
        'temp': 297.83,
        'feels_like': 300.48,
        'pressure': 1012,
        'humidity': 86,
        'dew_point': 295.38,
        'clouds': 54,
        'visibility': 10000,
        'wind_speed': 3.06,
        'wind_deg': 240,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.07},
        {'dt': 1596942000,
        'temp': 297.11,
        'feels_like': 299.86,
        'pressure': 1013,
        'humidity': 88,
        'dew_point': 295.11,
        'clouds': 37,
        'visibility': 10000,
        'wind_speed': 2.67,
        'wind_deg': 257,
        'weather': [{'id': 802,
         'main': 'Clouds',
         'description': 'scattered clouds',
         'icon': '03n'}],
        'pop': 0.12},
        {'dt': 1596945600,
        'temp': 296.26,
        'feels_like': 299.46,
        'pressure': 1013,
        'humidity': 89,
        'dew_point': 294.37,
        'clouds': 52,
        'visibility': 10000,
        'wind_speed': 1.54,
        'wind_deg': 277,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.12},
        {'dt': 1596949200,
        'temp': 295.24,
        'feels_like': 297.93,
        'pressure': 1013,
        'humidity': 85,
        'dew_point': 292.68,
        'clouds': 53,
        'visibility': 10000,
        'wind_speed': 1.06,
        'wind_deg': 299,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.12},
        {'dt': 1596952800,
        'temp': 294.48,
        'feels_like': 296.43,
        'pressure': 1013,
        'humidity': 79,
        'dew_point': 290.71,
        'clouds': 52,
        'visibility': 10000,
        'wind_speed': 0.92,
        'wind_deg': 327,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.1},
        {'dt': 1596956400,
        'temp': 293.89,
        'feels_like': 294.93,
        'pressure': 1013,
        'humidity': 74,
        'dew_point': 289.29,
        'clouds': 69,
        'visibility': 10000,
        'wind_speed': 1.32,
        'wind_deg': 18,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0},
        {'dt': 1596960000,
        'temp': 293.97,
        'feels_like': 294.55,
        'pressure': 1013,
        'humidity': 70,
        'dew_point': 288.42,
        'clouds': 60,
        'visibility': 10000,
        'wind_speed': 1.55,
        'wind_deg': 4,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.02},
        {'dt': 1596963600,
        'temp': 294.42,
        'feels_like': 294.53,
        'pressure': 1013,
        'humidity': 65,
        'dew_point': 287.69,
        'clouds': 72,
        'visibility': 10000,
        'wind_speed': 1.86,
        'wind_deg': 48,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.14},
        {'dt': 1596967200,
        'temp': 294.26,
        'feels_like': 294.24,
        'pressure': 1013,
        'humidity': 64,
        'dew_point': 287.36,
        'clouds': 79,
        'visibility': 10000,
        'wind_speed': 1.85,
        'wind_deg': 55,
        'weather': [{'id': 803,
         'main': 'Clouds',
         'description': 'broken clouds',
         'icon': '04n'}],
        'pop': 0.34},
        {'dt': 1596970800,
        'temp': 293.56,
        'feels_like': 293.26,
        'pressure': 1013,
        'humidity': 69,
        'dew_point': 287.89,
        'clouds': 84,
        'visibility': 10000,
        'wind_speed': 2.5,
        'wind_deg': 41,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10d'}],
        'pop': 0.56,
        'rain': {'1h': 0.38}}],
        'daily': [{'dt': 1596823200,
        'sunrise': 1596797802,
        'sunset': 1596850298,
        'temp': {'day': 295.2,
        'min': 291.26,
        'max': 296.77,
        'night': 295.6,
        'eve': 296.77,
        'morn': 291.26},
        'feels_like': {'day': 294.75,
        'night': 294.78,
        'eve': 297.4,
        'morn': 290.37},
        'pressure': 1015,
        'humidity': 74,
        'dew_point': 290.35,
        'wind_speed': 4.15,
        'wind_deg': 184,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10d'}],
        'clouds': 90,
        'pop': 0.93,
        'rain': 1.05,
        'uvi': 8.15},
        {'dt': 1596909600,
        'sunrise': 1596884279,
        'sunset': 1596936607,
        'temp': {'day': 301.8,
        'min': 294.48,
        'max': 302.61,
        'night': 294.48,
        'eve': 300.97,
        'morn': 295.79},
        'feels_like': {'day': 303.24,
        'night': 296.43,
        'eve': 303.08,
        'morn': 296.56},
        'pressure': 1012,
        'humidity': 67,
        'dew_point': 295.12,
        'wind_speed': 4.58,
        'wind_deg': 235,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10d'}],
        'clouds': 82,
        'pop': 0.48,
        'rain': 0.47,
        'uvi': 7.67},
        {'dt': 1596996000,
        'sunrise': 1596970756,
        'sunset': 1597022914,
        'temp': {'day': 295.72,
        'min': 292.14,
        'max': 299.06,
        'night': 293.67,
        'eve': 296.1,
        'morn': 292.14},
        'feels_like': {'day': 297.59,
        'night': 296.54,
        'eve': 297.9,
        'morn': 291.52},
        'pressure': 1010,
        'humidity': 79,
        'dew_point': 291.97,
        'wind_speed': 1.78,
        'wind_deg': 51,
        'weather': [{'id': 502,
         'main': 'Rain',
         'description': 'heavy intensity rain',
         'icon': '10d'}],
        'clouds': 100,
        'pop': 1,
        'rain': 23.98,
        'uvi': 6.85},
        {'dt': 1597082400,
        'sunrise': 1597057233,
        'sunset': 1597109220,
        'temp': {'day': 297.33,
        'min': 289.4,
        'max': 298.67,
        'night': 289.4,
        'eve': 295.82,
        'morn': 289.93},
        'feels_like': {'day': 295.09,
        'night': 287.49,
        'eve': 294.58,
        'morn': 288.34},
        'pressure': 1011,
        'humidity': 44,
        'dew_point': 284.59,
        'wind_speed': 3.73,
        'wind_deg': 295,
        'weather': [{'id': 800,
         'main': 'Clear',
         'description': 'clear sky',
         'icon': '01d'}],
        'clouds': 0,
        'pop': 0.8,
        'uvi': 7.41},
        {'dt': 1597168800,
        'sunrise': 1597143710,
        'sunset': 1597195525,
        'temp': {'day': 299.11,
        'min': 288.35,
        'max': 300.06,
        'night': 291.52,
        'eve': 297.08,
        'morn': 288.35},
        'feels_like': {'day': 296.68,
        'night': 291.1,
        'eve': 296.31,
        'morn': 285.93},
        'pressure': 1010,
        'humidity': 47,
        'dew_point': 287.26,
        'wind_speed': 5.17,
        'wind_deg': 228,
        'weather': [{'id': 800,
         'main': 'Clear',
         'description': 'clear sky',
         'icon': '01d'}],
        'clouds': 0,
        'pop': 0,
        'uvi': 7.35},
        {'dt': 1597255200,
        'sunrise': 1597230188,
        'sunset': 1597281829,
        'temp': {'day': 301.37,
        'min': 290.39,
        'max': 302.58,
        'night': 292.17,
        'eve': 297.87,
        'morn': 290.39},
        'feels_like': {'day': 304.21,
        'night': 292.77,
        'eve': 298.78,
        'morn': 290.68},
        'pressure': 1013,
        'humidity': 57,
        'dew_point': 292.12,
        'wind_speed': 0.48,
        'wind_deg': 162,
        'weather': [{'id': 800,
         'main': 'Clear',
         'description': 'clear sky',
         'icon': '01d'}],
        'clouds': 1,
        'pop': 0,
        'uvi': 7.22},
        {'dt': 1597341600,
        'sunrise': 1597316665,
        'sunset': 1597368131,
        'temp': {'day': 297.54,
        'min': 291.62,
        'max': 297.54,
        'night': 291.87,
        'eve': 293.46,
        'morn': 291.62},
        'feels_like': {'day': 296.61,
        'night': 291.96,
        'eve': 293.5,
        'morn': 292.35},
        'pressure': 1018,
        'humidity': 68,
        'dew_point': 291.39,
        'wind_speed': 5.38,
        'wind_deg': 79,
        'weather': [{'id': 501,
         'main': 'Rain',
         'description': 'moderate rain',
         'icon': '10d'}],
        'clouds': 78,
        'pop': 0.87,
        'rain': 4.68,
        'uvi': 7.33},
        {'dt': 1597428000,
        'sunrise': 1597403143,
        'sunset': 1597454432,
        'temp': {'day': 299.7,
        'min': 292.83,
        'max': 299.7,
        'night': 293.11,
        'eve': 295.05,
        'morn': 292.83},
        'feels_like': {'day': 302.86,
        'night': 294.77,
        'eve': 297.18,
        'morn': 294.06},
        'pressure': 1018,
        'humidity': 71,
        'dew_point': 294.08,
        'wind_speed': 1.36,
        'wind_deg': 220,
        'weather': [{'id': 500,
         'main': 'Rain',
         'description': 'light rain',
         'icon': '10d'}],
        'clouds': 75,
        'pop': 0.55,
        'rain': 2.16,
        'uvi': 6.06}]

    }

    def __init__(self, units="imperial"):
        self.api_key, self.latitude, self.longitude = self.get_api_key_and_gps().values()
        self.complete_url = (
            "https://api.openweathermap.org/data/2.5/onecall?lat="
            + self.latitude
            + "&lon="
            + self.longitude
            + "&exclude=minutely&appid="
            + self.api_key
            + "&units="
            + units
        )
        self.data = None
        self.update()

    def update(self):
        backup = self.data
        today_temps = []
        temp_start = 0

        try:
            response = requests.get(self.complete_url)
            self.data = response.json()
            r = self.data


            #loop thru hourly forecast data to retrieve temp values
            while temp_start < 24:
                OaT_Forcast = r['hourly'][temp_start]['temp']
                today_temps.append(OaT_Forcast)
                temp_start += 1

            # Create ndArray of forecast data for DASH web app
            npArray = np.array(today_temps, dtype=float)
            np.savetxt("today_temps.csv", npArray, delimiter=",")
            self._log.info("Sucess in request & saving CSV file of forecast data")


        except Exception as error:
            self._log.error("Error updating weather | {}".format(error))
            self._log.warning("Using blank weather data!")
            self._log.warning("Issues with weather request!")
            self.data = self.blank
            return self.data

        return self.data

    def get_api_key_and_gps(self):
        with open("api.key", "r") as file:
            d = json.load(file)
        return d["openweathermap"]





    @property
    def temp(self):
        return self.data['hourly'][0]["temp"]

    @property
    def hum(self):
        return self.data['hourly'][0]["humidity"]

    @property
    def dewpoint(self):
        return self.data['hourly'][0]["dew_point"]

    @property
    def clouds(self):
        return self.data['hourly'][0]["clouds"]

    @property
    def desciption(self):
        return self.data['hourly'][0]['weather'][0]['description']

    @property
    def temp_5AM(self):
        return self.data['hourly'][5]['temp']

    @property
    def hum_5AM(self):
        return self.data['hourly'][5]["humidity"]

    @property
    def dewpoint_5AM(self):
        return self.data['hourly'][5]["dew_point"]

    @property
    def clouds_5AM(self):
        return self.data['hourly'][5]["clouds"]

    @property
    def desciption_5AM(self):
        return self.data['hourly'][5]['weather'][0]['description']

    @property
    def temp_8AM(self):
        return self.data['hourly'][8]['temp']

    @property
    def hum_8AM(self):
        return self.data['hourly'][8]["humidity"]

    @property
    def dewpoint_8AM(self):
        return self.data['hourly'][8]["dew_point"]

    @property
    def clouds_8AM(self):
        return self.data['hourly'][8]["clouds"]

    @property
    def desciption_8AM(self):
        return self.data['hourly'][8]['weather'][0]['description']

    @property
    def temp_11AM(self):
        return self.data['hourly'][5]['temp']

    @property
    def hum_11AM(self):
        return self.data['hourly'][11]["humidity"]

    @property
    def dewpoint_11AM(self):
        return self.data['hourly'][11]["dew_point"]

    @property
    def clouds_11AM(self):
        return self.data['hourly'][11]["clouds"]

    @property
    def desciption_11AM(self):
        return self.data['hourly'][11]['weather'][0]['description']

    @property
    def temp_2PM(self):
        return self.data['hourly'][14]['temp']

    @property
    def hum_2PM(self):
        return self.data['hourly'][14]["humidity"]

    @property
    def dewpoint_2PM(self):
        return self.data['hourly'][14]["dew_point"]

    @property
    def clouds_2PM(self):
        return self.data['hourly'][14]["clouds"]

    @property
    def desciption_2PM(self):
        return self.data['hourly'][14]['weather'][0]['description']

    @property
    def temp_5PM(self):
        return self.data['hourly'][17]['temp']

    @property
    def hum_5PM(self):
        return self.data['hourly'][17]["humidity"]

    @property
    def dewpoint_5PM(self):
        return self.data['hourly'][17]["dew_point"]

    @property
    def clouds_5PM(self):
        return self.data['hourly'][17]["clouds"]

    @property
    def desciption_5PM(self):
        return self.data['hourly'][17]['weather'][0]['description']

    @property
    def temp_8PM(self):
        return self.data['hourly'][20]['temp']

    @property
    def hum_8PM(self):
        return self.data['hourly'][20]["humidity"]

    @property
    def dewpoint_8PM(self):
        return self.data['hourly'][20]["dew_point"]

    @property
    def clouds_8PM(self):
        return self.data['hourly'][20]["clouds"]

    @property
    def desciption_8PM(self):
        return self.data['hourly'][20]['weather'][0]['description']

    @property
    def lati(self):
        return self.data['lat']

    @property
    def long(self):
        return self.data['lon']
